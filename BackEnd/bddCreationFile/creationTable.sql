-- DROP TABLE IF EXISTS users;
-- DROP TABLE IF EXISTS filament;
-- DROP TYPE IF EXISTS roleOf;

CREATE TYPE roleOf AS ENUM('user', 'admin');

CREATE TABLE users(
	id INT UNIQUE GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name VARCHAR(64) NOT NULL,
	last_name VARCHAR(128) NOT NULL,
	role roleOf,
	email VARCHAR(64) NOT NULL UNIQUE,
	birth_date TIMESTAMP NOT NULL,
	mdp VARCHAR(256) NOT NULL,
	);

CREATE TABLE filament(
	id INT UNIQUE GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	brand VARCHAR(64) NOT NULL,
	price NUMERIC(5,2) GENERATED ALWAYS AS (bobine_price / (bobine_weight/1000)) STORED NOT NULL,
	bobine_price NUMERIC(5,2) NOT NULL,
	bobine_weight NUMERIC(5,0) NOT NULL,
	material VARCHAR(32) NOT NULL,
	quality NUMERIC(2)
	);